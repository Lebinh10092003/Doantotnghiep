<div class="dataTable-container table-responsive">
  <table class="table table-striped dataTable-table">
    <thead>
      <tr>
        <th>Lớp học</th>
        <th>Buổi số</th>
        <th>Ngày học</th>
        <th>Thời gian</th>
        <th>Bài học</th>
        <th>Giáo viên</th>
        <th>Trạng thái</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      {% if page_obj.object_list %}
        {% if group_by %}
          {% regroup page_obj.object_list by group_label as session_groups %}
          {% for group in session_groups %}
            <tr class="table-group">
              <td colspan="8"><strong>{{ group.grouper|default:"Chưa xác định" }}</strong></td>
            </tr>
            {% for session in group.list %}
              {% include "_class_session_row.html" with session=session %}
            {% endfor %}
          {% endfor %}
        {% else %}
          {% for session in page_obj.object_list %}
            {% include "_class_session_row.html" with session=session %}
          {% endfor %}
        {% endif %}
      {% else %}
      <tr>
        <td colspan="8" class="text-center">Không tìm thấy buổi học nào khớp.</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>

<div class="dataTable-bottom d-flex flex-wrap justify-content-between align-items-center gap-2">
  <div class="dataTable-info mb-0">
    Hiện {{ page_obj.start_index }} đến {{ page_obj.end_index }} trong tổng số {{ paginator.count }} mục
  </div>

  {% if page_obj.has_other_pages %}
  <nav class="dataTable-pagination">
    <ul class="pagination mb-0">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page=1&{{ current_query_params }}" hx-get="?page=1&{{ current_query_params }}" hx-target="#{{ target_id|default:'filterable-content' }}" hx-swap="innerHTML" hx-push-url="true">Đầu</a>
      </li>
      {% endif %}

      {% for i in paginator.page_range %}
        {% if i >= page_obj.number|add:'-2' and i <= page_obj.number|add:'2' %}
          <li class="page-item {% if page_obj.number == i %}active{% endif %}">
            <a class="page-link" href="?page={{ i }}&{{ current_query_params }}" hx-get="?page={{ i }}&{{ current_query_params }}" hx-target="#{{ target_id|default:'filterable-content' }}" hx-swap="innerHTML" hx-push-url="true">{{ i }}</a>
          </li>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?page={{ paginator.num_pages }}&{{ current_query_params }}" hx-get="?page={{ paginator.num_pages }}&{{ current_query_params }}" hx-target="#{{ target_id|default:'filterable-content' }}" hx-swap="innerHTML" hx-push-url="true">Cuối</a></li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</div>
