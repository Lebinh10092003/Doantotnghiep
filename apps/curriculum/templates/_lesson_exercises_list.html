<h6 class="text-muted">Danh sách bài tập</h6>
{% if exercises %}
<ul class="list-group">
  {% for ex in exercises %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
      <span class="fw-bold">Bài tập #{{ forloop.counter }}</span>
      <small class="text-muted ms-2">({{ ex.get_difficulty_display }})</small>
      <p class="mb-0 small">{{ ex.description|truncatechars:100 }}</p>
      {% if ex.file %}
      <a href="{{ ex.file.url }}" target="_blank" class="small"><i class="bi bi-paperclip"></i> Tệp đính kèm</a>
      {% endif %}
    </div>
    <div class="d-flex gap-1">
      {% if perms.curriculum.change_exercise %}
      <button type="button" class="btn btn-sm btn-outline-warning"
              hx-get="{% url 'curriculum:exercise_edit' ex.id %}"
              hx-target="#exercise-form-container"
              hx-swap="innerHTML">
        <i class="bi bi-pencil"></i>
      </button>
      {% endif %}
      {% if perms.curriculum.delete_exercise %}
      <button type="button" class="btn btn-sm btn-outline-danger"
              hx-post="{% url 'curriculum:exercise_delete' ex.id %}"
              hx-swap="none"
              data-confirm-title="Xác nhận xóa"
              data-confirm-text="Bạn chắc chắn muốn xóa bài tập này?">
        <i class="bi bi-trash"></i>
      </button>
      {% endif %}
    </div>
  </li>
  {% endfor %}
</ul>
{% else %}
<p class="text-center text-muted mt-3">Chưa có bài tập nào cho bài học này.</p>
{% endif %}