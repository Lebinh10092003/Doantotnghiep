{% load static %}
<div class="modal-body">
    <div class="row">
        <div class="col-md-4 text-center">
            {% if user.avatar %}
                <img src="{{ user.avatar.url }}" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;" alt="Avatar">
            {% else %}
                <img src="{% static 'compiled/jpg/1.jpg' %}" class="img-fluid rounded-circle mb-3" style="width: 120px; height: 120px;" alt="Default Avatar">
            {% endif %}
            <h4>{{ user.get_full_name|default:user.username }}</h4>
            <p class="text-muted">{{ user.get_role_display }}</p>
        </div>
        <div class="col-md-8">
            <table class="table table-borderless">
                <tbody>
                    <tr><th style="width: 30%;">Username:</th><td>{{ user.username }}</td></tr>
                    <tr><th>Email:</th><td>{{ user.email }}</td></tr>
                    <tr><th>Số điện thoại:</th><td>{{ user.phone }}</td></tr>
                    <tr><th>Trung tâm:</th><td>{{ user.center.name|default:"Chưa có" }}</td></tr>
                    <tr><th>Nhóm:</th>
                        <td>
                            {% for group in user.groups.all %}
                                <span class="badge bg-secondary">{{ group.name }}</span>
                            {% empty %}
                                <span class="text-muted">Không thuộc nhóm nào</span>
                            {% endfor %}
                        </td>
                    </tr>
                    <tr><th>Trạng thái:</th>
                        <td>
                            {% if user.is_active %}<span class="badge bg-success">Hoạt động</span>
                            {% else %}<span class="badge bg-danger">Không hoạt động</span>{% endif %}
                        </td>
                    </tr>
                    <tr><th>Ngày tham gia:</th><td>{{ user.date_joined|date:"d/m/Y H:i" }}</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
        <span>Đóng</span>
    </button>
    <button type="button" class="btn btn-primary"
        hx-get="{% url 'accounts:edit_user' user.id %}"
        hx-target="#modal-content"
        @click="modalTitle = 'Chỉnh sửa: {{ user.username|escapejs }}'">
        <i class="bi bi-pencil-square"></i> Chỉnh sửa
    </button>
    <form hx-post="{% url 'accounts:delete_users' %}"
          hx-swap="none"
          class="d-inline"
          data-confirm-title="Xác nhận xóa"
          data-confirm-text="Bạn có chắc chắn muốn xóa người dùng '{{ user.username }}'?">
        {% csrf_token %}
        <input type="hidden" name="user_ids" value="{{ user.id }}">
        <button type="submit" class="btn btn-danger">
            <i class="bi bi-trash"></i> Xóa
        </button>
    </form>
</div>