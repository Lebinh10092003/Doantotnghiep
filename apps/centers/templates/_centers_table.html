<div class="dataTable-container table-responsive">
  <table class="table table-striped dataTable-table" id="centers-table-content">
    <thead>
      <tr>
        <th><input type="checkbox" onclick="toggleAllCenterCheckboxes(this)"></th>
        <th>Tên Trung tâm</th>
        <th>Mã</th>
        <th>Địa chỉ</th>
        <th>Số điện thoại</th>
        <th>Email</th>
        <th>Trạng thái</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      {% if page_obj.object_list %}
        {% if group_by == "status" %}
          {% regroup page_obj.object_list by is_active as status_groups %}
          {% for status_group in status_groups %}
          <tr class="table-group">
            <td colspan="8">
              <strong>
                {% if status_group.grouper %}Trung tâm hoạt động{% else %}Trung tâm không hoạt động{% endif %}
              </strong>
            </td>
          </tr>
          {% for center in status_group.list %}
            {% include "_center_row.html" with center=center %}
          {% endfor %}
          {% endfor %}
        {% else %}
          {% for center in page_obj.object_list %}
            {% include "_center_row.html" with center=center %}
          {% endfor %}
        {% endif %}
      {% else %}
      <tr>
        <td colspan="8" class="text-center">Không tìm thấy Trung tâm nào.</td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>

<div class="dataTable-bottom d-flex justify-content-between align-items-center">
  <div class="dataTable-info">
    Hiển thị {{ page_obj.start_index }} đến {{ page_obj.end_index }} trong tổng số {{ paginator.count }} mục
  </div>

  <nav class="dataTable-pagination">
    <ul class="pagination">
      {% if page_obj.number > 1 %}
      <li class="page-item">
          <a hx-get="{% url 'centers:centers_manage' %}?page=1&per_page={{ per_page }}{% if current_query_params %}&{{ current_query_params }}{% endif %}" 
             hx-target="#{{ target_id|default:'centers-filterable-content' }}" hx-swap="innerHTML" hx-push-url="true" class="page-link">
          Đầu
        </a>
      </li>
      {% endif %}

      {% for p in paginator.page_range %}
        {% if p >= page_obj.number|add:-2 and p <= page_obj.number|add:2 %}
        <li class="page-item {% if page_obj.number == p %}active{% endif %}">
            <a hx-get="{% url 'centers:centers_manage' %}?page={{ p }}&per_page={{ per_page }}{% if current_query_params %}&{{ current_query_params }}{% endif %}"
               hx-target="#{{ target_id|default:'centers-filterable-content' }}" hx-swap="innerHTML" hx-push-url="true" class="page-link">
            {{ p }}
          </a>
        </li>
        {% endif %}
      {% endfor %}

      {% if page_obj.number < paginator.num_pages %}
      <li class="page-item">
          <a hx-get="{% url 'centers:centers_manage' %}?page={{ paginator.num_pages }}&per_page={{ per_page }}{% if current_query_params %}&{{ current_query_params }}{% endif %}"
             hx-target="#{{ target_id|default:'centers-filterable-content' }}" hx-swap="innerHTML" hx-push-url="true" class="page-link">
          Cuối
        </a>
      </li>
      {% endif %}
    </ul>
  </nav>
</div>